### 1. 小程序运行周期

参考链接:https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/operating-mechanism.html

小程序从启动到最终的销毁,会经历多个不同的状态,小程序在不同的状态会有不同的表现.

小程序不同的状态之间的切换,可参考下图:

<img src="./images/img-2.png" width="300" />

#### 1.1 小程序启动方式

小程序有两种启动方式:

1. 冷启动

2. 热启动

**冷启动**

如果用户是手册打开小程序,或者小程序小会后再次打开,此时小程序需要重新加载启动,这种启动方式成为冷启动.

**热启动**

如果用户已经打开过某个小程序,然后在一定的时间内再次打开该小程序,这时小程序还没有被销毁,只是进行了一次前后台的状态切换,这种启动方式属于热启动.

> 一定的时间内再次打开,这个一定的时间,一般的情况下是30分钟.

从小程序的生命周期角度来看,大多数情况下说的启动都指“冷启动”,而热启动被称作为后台切换为前台,也就是小程序状态之间的切换.

#### 1.2 小程序不同状态之间的切换

**前台与后台**

小程序的不同状态,可以概括为前台和后台.

**前台**:小程序启动后,界面展示给用户,此时小程序处于前台状态.

**后台**:用户"关闭"小程序后,这时小程序并没有被真正的关闭,而只是通过用户的一些操作,将界面隐藏起来,用户看不到了,这个时候称小程序处于后台状态.此时小程序还可以运行一段时间,在这个时间内,部分api的使用会被限制,前台切换到后台的方式包括但不限于以下几种:

- 点击右上角胶囊按钮离开小程序

- iOS从屏幕左侧右滑离开小程序

- 安卓点击返回键离开小程序

- 小程序运行时直接把微信切换到后台(手势或者home键)

- 小程序运行时直接锁屏

当用户再次进入小程序时,小程序就会重新进入前台.

#### 1.3 小程序挂起

小程序切换到后台5s后被挂起,这时微信会停止小程序js线程的执行,但是小程序的内存状态会被保留,但是开发者的业务代码会被停止执行,事件和接口回调等会在小程序重新进入前台时恢复执行.

> 但是当开发者使用了后台音乐播放、后台地理位置等能力时,小程序可以在后台继续执行,不会进入到挂起状态.

#### 1.4 小程序销毁

#### 1.5 小程序重启策略

#### 1.6 小程序退出

### 小程序更新机制

参考文档:https://developers.weixin.qq.com/miniprogram/dev/framework/runtime/update-mechanism.html