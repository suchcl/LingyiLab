### 注册小程序

每个小程序都需要在app.js中调用App方法注册小程序实例，绑定小程序的生命周期回调函数、错误监听和页面不存在监听函数等。

```js
// app.js
App({
    onLaunch(options){
        // 生命周期回调 --- 监听小程序初始化
    },
    onShow(options){
        // 生命周期回调 --- 监听小程序启动或切换后台
    },
    onHide(){
        // 生命周期回调 --- 监听小程序切换后台
    },
    onPageNotFound(res){
        // 页面不存在监听函数
    }
    onError(msg){
        // 错误监听函数
    }
})

```

小程序生命周期函数

| 属性     | 参数   | 必需 | 说明                                                         |
| -------- | ------ | ---- | ------------------------------------------------------------ |
| onLaunch | Object | 否   | 小程序初始化完成时执行；参数与wx.getLaunchOptionsSync一致，具体可参考：https://developers.weixin.qq.com/miniprogram/dev/api/base/app/life-cycle/wx.getLaunchOptionsSync.html |
| onShow   | Object | 否   | 小程序启动，或者从后台切入到前台时触发；参数与w x.onAppShow一直，具体可参考：https://developers.weixin.qq.com/miniprogram/dev/api/base/app/app-event/wx.onAppShow.html |
| onHide   |        | 否   | 小程序从前台切入后台时触发                                   |

整个小程序只有一个App实例，是整个小程序共享的，开发者可以通过getApp()方法获取到全局唯一的App实例，获取App上的数据或者调用注册在app上的函数。

### 小程序生命周期

小程序从启动到最终销毁，中间会经历多个状态，小程序在不同的状态下会有不同的表现。

小程序启动后，会首先进入到前台状态，这个时候，小程序可以在前台和后台之间状态的切换，如果进入到后台状态后5秒钟没有响应，那么小程序就会被刮起，刮起后的小程序也可以再次被切入到前台。如果进入到刮起状态的小程序30分钟没有响应，那么该小程序就会被销毁。具体过程可参考下图：

![小程序生命周期状态流转](./images/img-2.png)

