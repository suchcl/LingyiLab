### egg指定运行环境

一个web应用和http协议是类似的，它们本身没有状态，但是在项目的实际过程中，又需要根据http的状态和web应用所在的环境做一些差异化的处理。在网络协议中，有各种状态码可以帮我们实现这样的诉求，那么在一个web应用中，我们也可以通过类似的方案帮我们实现这个诉求，这个方案就是将web应用区分不同的环境。

egg框架有两种方式可以指定运行环境。

1. 通过config/env文件指定，该文件内容就是运行环境，如test、prod。一般情况下这个文件以及文件内容通过构建工具来生成。

> 当然了，如果没有构建工具的能力，自己手动创建一个文件也是可以实现同样的功能的

2. 通过EGG_SERVER_ENV环境变量指定运行环境，在项目启动时通过启动脚本指定：

```bash
EGG_SERVER_ENV=prod npm start
```

### 获取运行环境

框架给我们提供了获取当前运行环境的能力，我们可以通过变量app.config.env来获取当前项目的运行环境，而无论是使用上面两种指定运行方式哪一种指定的运行环境。

```javascript
const env = app.config.env;
```

### egg的运行环境

egg的运行环境有3个：

1. local  本地及开发环境
2. unitest 单元测试环境
3. prod 生产环境