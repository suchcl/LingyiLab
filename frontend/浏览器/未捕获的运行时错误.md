### Unchecked runtime.lastError: A listener indicated an asynchronous response by returning true, but the message channel closed before a response was received

最近浏览器开发者工具总是报这个异常：刚开始以为是项目中的代码异常呢，排查了下，没有用发现项目中的代码问题。然后就又发现不光是当前的项目浏览器中会报出来这个异常，换成了其他的项目，浏览器也报这个异常。

于是我断定，这已经不是我项目的代码问题了，问题应该是出在浏览器身上了.既然不是我项目代码的问题，就先由他去吧。

但是对于一个技术人员，经常需要打开开发者工具，一打开开发者工具，就看到一行红色的报错信息，就感觉到不适，可能是强迫症吧。这个颜色太刺眼，严重影响我的心情，决心要搞掉它。

在网上查了下，说是可能是一些浏览器插件的问题，也可能是和网络有关。大概的意思就是说在信息通道关闭之后又返回了异步响应，返回结果是true。案例说，在信息通道关闭之后，就不能再返回有效信息了，但是由于信息通道关闭之前可能处理的是一个异步任务，结果在信息通道关闭之后，之前处理的异步任务才有了结果，还返回了。

一个正常的思维，就是说如果一个信息通道关闭了，那么这个信息通道处理的任务，就不能再做任何的响应了，哪怕是在关闭之前做的异步任务，也不能在信息通道关闭之后再做出响应。这个现象，也给我们日常开发带来一个提醒，注意处理异步任务。

我们继续回到问题中来，既然已经定位到报这个异常的原因，是浏览器相关的，那就需要确认是否所有浏览器都有类似的问题。我咨询了身边的朋友，打开同样的网页，相同的系统、相同版本的浏览器，就我自己的浏览器报了异常，于是又可以确定，浏览器本身没有问题。那么就再继续排查浏览器中安装的插件。由于是做web开发的，浏览器中安装了很多的插件。

在网上查了下，发现也有人说是浏览器插件的问题，但是没有明确是哪个插件。我先在自己浏览器中安装的插件，找到那些不经常使用的(因为我经常使用的，别人也是在使用，我这有问题了，别人也会有问题才对)。当我关闭了Tampermonkey插件时，发现浏览器就不再报异常了。

问题定位到，起码在我的电脑上，问题就是出在了Tampermonkey这个插件。关闭了就行了，这个插件我目前使用的频率很低，几乎不怎么使用。