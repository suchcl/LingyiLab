### 1. 服务端渲染

Vue.js是一个用于构建客户端应用的框架。默认情况下，Vue组件的职责是在浏览器中生成和操作DOM。但是Vue也支持将组件直接在服务端渲染成HTML字符串，作为服务端响应返回给浏览器，最后在浏览器端将静态的HTML激活(hydrate)为能够交互的客户端应用。

一个由服务端渲染的Vue.js应用也可以被认为是“同构的(Isomorphic)”或"通用的"(Universal),因为应用的大部分代码同时运行在服务端和客户端。
#### 1.1 服务端渲染有什么优势(为什么要使用服务端渲染)？

服务端渲染(SSR: Server Side Render)同客户端渲染的单页面(SPA)相比，SSR的主要优势有以下几个方面：

1. **更快的首屏加载**：这一点在网络环境不好或者硬件设备配置低的场景下尤为明显。服务端渲染的HTML不用等到所有的Javascript都下载并执行完成后才显示，所以用户可以更快的看到渲染完成的页面。除此之外，数据获取过程在首次访问时已经在服务端完成，相比于从客户端获取，可能会有更快的数据库连接。这些动作可以带来更高的性能评分、更加友好的使用体验，对于一些重转化的应用来说，这一点尤为重要。

   > web应用的性能指标可参考：https://web.dev/vitals/

2. **统一的心智模型**:开发者可以使用相同的语言、相同的面向组件的心智模型来开发整个应用，而不需要在后端模板系统和前端框架之间频繁切换。这点对开发者来说尤其友好。

3. **更好的SEO**：搜索引擎爬虫可以直接看到渲染完整的页面。

   > 截止目前，Google、Bing可以很好的对同步javascript应用进行索引。也就是说Google和Bing可以对同步的javascript应用进行数据爬取并能够爬取到相应的数据。应该注意这里的“同步”，也就是说Google和Bing等这些引擎只能爬取到同步数据，但是对于通过js异步获取的数据是爬取不到的，但实际情况是大部分的前端应用都是异步方式获取的数据。所以对于有SEO需求的应用来说，服务端渲染还是很有必要的。

#### 1.2 做服务端渲染需要考虑的问题

在做服务端渲染之前，需要考虑好以下几个方面的问题：

1. 开发中的限制：浏览器端特定的代码只能在某些生命周期钩子中使用，一些外部库可能需要经过特殊处理才能在服务端渲染的应用中使用；
2. 更多的与构建配置和部署相关的要求：服务端渲染的应用需要一个能让Node.js服务器运行的环境，不像完全静态的SPA那样可以部署在任意的静态文件服务器上；
3. 更高的服务端负载：在Node.js中渲染一个完整的应用要比仅仅托管静态文件更加占用CPU资源，因此如果你预期有高流量，需要为相应的服务器负载做好准备，并采用合理的缓存策略。

**SSG和SSR的比较**

SSG,Static-site Generation,静态站点生成，缩写为SSG，也被称为预渲染，是另一种流行的构建快速网站的技术。如果用服务端渲染一个页面所需要的数据对每个用户都是相同的，那么我们可以只渲染一次，提前在构建过程中完成，而不是每次进来都需要重新渲染页面。预渲染的页面生成后作为静态HTML文件被服务器托管。

SSG保留了和SSR应用相同的性能表现：它带来了优秀的首屏加载性能，但是它比SSR的开销更小，更加容易部署，因为SSG就是静态的HTML和资源文件。SSG的关键是静态，SSG仅可用于消费静态数据的页面，即页面在构建期间数据就是已知和确定的。页面的多次、重复部署，数据是不会改变的，每当数据有变化时，都需要重新生成静态页面并重新部署。

如果我们的应用只是为了优化为数不多的几个页面的SEO，比如关于我们、联系我们等这样的基本信息的页面，那么可能最优的方案是使用SSG而不是使用SSR。SSR非常适合构建基于内容的站点，比如博客、文档站点等。

#### 1.3 做服务端渲染需要具备什么知识技能？

由于SSR是需要在服务端渲染的，服务端渲染的应用需要有一个Node.js环境，所以如果需要做基于Vue的服务端渲染，需要了解以下几个方面的一些知识：

1. Vue的开发技能；

2. Webpack的一些配置技能；

3. Node.js的开发基础；

4. 服务器配置的一些基本技能；

如果要做服务端渲染，上面几个方面的技能是

### 2. Vue2中的服务端渲染实现

### 3. Vue3中服务端渲染的实现