<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

- [1.Umi ç®€ä»‹](#1umi-%E7%AE%80%E4%BB%8B)
- [2. å¿«é€Ÿä¸Šæ‰‹](#2-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

### 1.Umi ç®€ä»‹

Umiï¼Œæ˜¯èš‚èšé‡‘æœçš„åº•å±‚ã€å¯æ‰©å±•çš„ä¼ä¸šçº§å‰ç«¯åº”ç”¨æ¡†æ¶ï¼Œä»¥è·¯ç”±ä¸ºåŸºç¡€ï¼Œæ”¯æŒé…ç½®è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼Œä¿è¯è·¯ç”±çš„åŠŸèƒ½å®Œå¤‡ã€‚

**Umi çš„ç‰¹ç‚¹**

1. å¯æ‰©å±•ï¼šumi å®ç°äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä½¿å…¶æ’ä»¶åŒ–ï¼Œumi å†…éƒ¨åŠŸèƒ½ä¹Ÿå…¨ç”±æ’ä»¶å®Œæˆï¼Œå¦å¤–ä¹Ÿæ”¯æŒæ’ä»¶å’Œæ’ä»¶é›†ï¼Œä»¥æ»¡è¶³åŠŸèƒ½å’Œå‚ç›´åŸŸçš„åˆ†å±‚éœ€æ±‚ï¼›

2. å¼€ç®±å³ç”¨ï¼šumi å†…ç½®äº†è·¯ç”±ã€æ„å»ºã€éƒ¨ç½²ã€æµ‹è¯•ç­‰ï¼Œä»…éœ€ä¸€ä¸ªä¾èµ–å³å¯ä¸Šæ‰‹å¼€å‘ï¼Œå¹¶ä¸”è¿˜æä¾›é’ˆå¯¹ React çš„é›†æˆæ’ä»¶é›†ï¼Œå†…æ¶µä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¯æ»¡è¶³å¤§éƒ¨åˆ†çš„å¼€å‘éœ€æ±‚ï¼›

3. ä¼ä¸šçº§ï¼šèš‚èšå†…éƒ¨ä»¥åŠé˜¿é‡Œã€ä¼˜é…·ã€ç½‘æ˜“ã€é£çŒªã€å£ç¢‘ç­‰å…¬å¸çš„å¤§é‡åº”ç”¨å®è·µï¼Œå€¼å¾—ä¿¡èµ–ï¼›

4. å¤§é‡è‡ªç ”ï¼šåŒ…å«å¾®å‰ç«¯ã€ç»„ä»¶æ‰“åŒ…ã€æ–‡æ¡£å·¥å…·ã€è¯·æ±‚åº“ã€hooksã€æ•°æ®æµç­‰ï¼Œæ»¡è¶³æ—¥å¸¸çš„å‘¨è¾¹éœ€æ±‚ï¼›

5. å®Œå¤‡è·¯ç”±ï¼šåŒæ—¶æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼ŒåŒæ—¶ä¿è¯åŠŸèƒ½çš„å®Œå¤‡æ€§ï¼Œæ¯”å¦‚åŠ¨æ€è·¯ç”±ã€åµŒå¥—è·¯ç”±ã€æƒé™è·¯ç”±ç­‰ï¼›

6. é¢å‘æœªæ¥ï¼šåœ¨æ»¡è¶³éœ€æ±‚å¼€å‘çš„åŒæ—¶ï¼Œä¹Ÿåœ¨å®æ—¶ä¿æŒå¯¹æ–°æŠ€æœ¯çš„æ¢ç´¢ï¼Œå¦‚ dll æé€Ÿã€modern modeã€webpack@5ã€è‡ªåŠ¨åŒ– externalã€bundle less ç­‰ï¼›

**ä¸é€‚åˆ Umi çš„åœºæ™¯**

1. éœ€è¦å…¼å®¹ IE8 ä»¥åŠæ›´ä½ç‰ˆæœ¬çš„æµè§ˆå™¨

2. éœ€è¦æ”¯æŒ 16.8.0 ä»¥ä¸‹ç‰ˆæœ¬çš„ React

3. éœ€è¦è·‘åœ¨ Node 10 ä»¥ä¸‹ç‰ˆæœ¬çš„ç¯å¢ƒ

4. æœ‰å¾ˆå¼ºçš„ webpack è‡ªå®šä¹‰éœ€æ±‚å’Œä¸»è§‚æ„æ„¿

5. éœ€è¦é€‰æ‹©ä¸åŒçš„è·¯ç”±æ–¹æ¡ˆ

**æ’ä»¶å’Œæ’ä»¶é›†**

<img src="./images/i1.png" alt="umiæ”¯æŒæ’ä»¶å’Œæ’ä»¶é›†" style="zoom: 30%;">

Umi æ”¯æŒæ’ä»¶å’Œæ’ä»¶é›†ï¼Œä¸åŒçš„æ’ä»¶é›†åˆåˆ°ä¸€èµ·å½¢æˆå„ç§æ’ä»¶é›†ï¼Œä¸åŒçš„æ’ä»¶é›†åˆå¯ä»¥æ”¯æŒä¸åŒçš„ä¸šåŠ¡ç±»å‹ã€‚

**é…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±**

umi åŒæ—¶æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼Œé…ç½®å¼è·¯ç”±æ˜¯å¤§éƒ¨åˆ†ç”¨æˆ·åœ¨ä½¿ç”¨çš„ï¼Œæ˜¯å‘ç°å®çš„å¦¥åï¼Œå› ä¸ºå®ƒåŠŸèƒ½å¼ºå¤§ï¼›çº¦å®šå¼è·¯ç”±æ˜¯åœ¨åŠªåŠ›çš„ï¼Œå› ä¸ºå®ƒæ›´åŠ çš„ä¼˜é›…ã€ç®€æ´ã€‚

**.umi ä¸´æ—¶æ–‡ä»¶**

.umiä¸´æ—¶æ–‡ä»¶è¢«ç§°ä¸ºæ•´ä¸ªumié¡¹ç›®çš„å‘åŠ¨æœºï¼Œé¡¹ç›®çš„å…¥å£æ–‡ä»¶ã€è·¯ç”±ç­‰éƒ½åœ¨è¿™é‡Œï¼Œè¿™äº›æ–‡ä»¶æ˜¯ç”± umi å†…éƒ¨æ’ä»¶åŠç¬¬ä¸‰æ–¹æ’ä»¶ç”Ÿæˆçš„ã€‚

.umiä¸´æ—¶æ–‡ä»¶ç”Ÿæˆåœ¨srcç›®å½•ä¸‹

åœ¨.umi ç›®å½•ä¸‹é€šå¸¸å¯ä»¥çœ‹åˆ°è¿™æ ·çš„ç›®å½•/æ–‡ä»¶ï¼š

```markdown
.umi
â”œâ”€umi.ts  // å…¥å£æ–‡ä»¶
â”œâ”€plugin-request
|       â””request.ts
â”œâ”€plugin-model
|      â”œâ”€Provider.tsx
|      â”œâ”€runtime.tsx
|      â”œâ”€useModel.tsx
|      â”œâ”€helpers
|      |    â”œâ”€constant.tsx
|      |    â”œâ”€dispatcher.tsx
|      |    â””executor.tsx
â”œâ”€plugin-initial-state
|          â”œâ”€Provider.tsx
|          â”œâ”€exports.ts
|          â”œâ”€runtime.tsx
|          â”œâ”€models
|          |   â””initialState.ts
â”œâ”€plugin-helmet
|       â””exports.ts
â”œâ”€core
|  â”œâ”€devScripts.ts
|  â”œâ”€history.ts
|  â”œâ”€plugin.ts
|  â”œâ”€pluginConfig.d.ts
|  â”œâ”€pluginRegister.ts
|  â”œâ”€polyfill.ts
|  â”œâ”€routes.ts
|  â””umiExports.ts
â”œâ”€.cache
|   â”œâ”€babel-loader
|   |      â”œâ”€0395cb2cefdacebd957375d458411a10.json.gz
|   |      â”œâ”€0dc2e049637a87e86d6a661a38dd651a.json.gz
|   |      â”œâ”€10402cd3212c5aa97f851abca1d23a18.json.gz
|   |      â”œâ”€112abf79079ca5a84012e798bd69353e.json.gz
|   |      â”œâ”€1c8e28554df70209c71e20b895c992e8.json.gz
```

.umi ä¸´æ—¶æ–‡ä»¶æ˜¯ umi æ¡†æ¶éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œæ¡†æ¶å’Œæ’ä»¶ä¼šæ ¹æ®æˆ‘ä»¬çš„ä»£ç ç”Ÿæˆä¸´æ—¶æ–‡ä»¶ï¼ŒåŸæ¥ä¸€éƒ¨åˆ†åœ¨é¡¹ç›®ä¸­çš„è°ƒè¯•ã€è„ä¹±å·®çš„éƒ¨åˆ†éƒ½ç§»åŠ¨åˆ°äº†è¿™é‡Œï¼›

æˆ‘ä»¬å¯ä»¥åœ¨.umi ä¸­è°ƒè¯•ä»£ç ï¼Œä½†æ˜¯ä¸è¦æäº¤åˆ°.gitï¼Œå› ä¸ºè¿™ä¸ªç›®å½•æ˜¯ä¸´æ—¶æ–‡ä»¶ï¼Œæ¯æ¬¡å¯åŠ¨ umi æ—¶éƒ½ä¼šåˆ é™¤ä¹‹å‰çš„ä¸´æ—¶æ–‡ä»¶å¹¶é‡æ–°ç”Ÿæˆæ–°çš„ä¸´æ—¶æ–‡ä»¶ã€‚

### 2. å¿«é€Ÿä¸Šæ‰‹

é€šè¿‡yarnå¿«é€Ÿåˆ›å»ºé¡¹ç›®

> umiå›¢é˜Ÿå»ºè®®ä½¿ç”¨yarnä½œä¸ºumié¡¹ç›®ä¸­ç®¡ç†npmä¾èµ–çš„å·¥å…·ã€‚

```bash
xxx@xxxx umi1 % yarn create @umijs/umi-app
yarn create v1.22.17
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...

success Installed "@umijs/create-umi-app@3.5.20" with binaries:
      - create-umi-app
[#################################################] 49/49Copy:  .editorconfig
Write: .gitignore
Copy:  .prettierignore
Copy:  .prettierrc
Write: .umirc.ts
Copy:  mock/.gitkeep
Write: package.json
Copy:  README.md
Copy:  src/pages/index.less
Copy:  src/pages/index.tsx
Copy:  tsconfig.json
Copy:  typings.d.ts
âœ¨  Done in 1.44s.
```

è¡¨ç¤ºå·²ç»é€šè¿‡yarnæˆåŠŸçš„åˆ›å»ºäº†ä¸€ä¸ªåŸºäºå½“å‰ç›®å½•umi1çš„umié¡¹ç›®ï¼Œå…¶é»˜è®¤çš„é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```markdown
umi1
â”œâ”€.editorconfig
â”œâ”€.prettierignore
â”œâ”€.prettierrc
â”œâ”€.umirc.ts
â”œâ”€README.md
â”œâ”€package.json
â”œâ”€tsconfig.json
â”œâ”€typings.d.ts
â”œâ”€src
|  â”œâ”€pages
|  |   â”œâ”€index.less
|  |   â””index.tsx
â”œâ”€mock
```

**å®‰è£…ä¾èµ–**

```bash
xxx@xxxx umi1 % yarn
yarn install v1.22.17
info No lockfile found.
****** # è¿™é‡Œçœç•¥äº†æ­¥éª¤ï¼Œæ²¡æœ‰ç²˜è´´è¿‡ç¨‹æç¤ºä¿¡æ¯
[4/4] ğŸ”¨  Building fresh packages...
success Saved lockfile.
$ umi generate tmp
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
âœ¨  Done in 58.96s.
```

**é¡¹ç›®å¯åŠ¨**

```bash
xxx@xxxx umi1 % yarn start
yarn run v1.22.17
$ umi dev
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
Starting the development server...

âœ” Webpack
  Compiled successfully in 4.40s

 DONE  Compiled successfully in 4399ms                                                                                                                                                        ä¸‹åˆ10:58:58


  App running at:
  - Local:   http://localhost:8000 (copied to clipboard)
  - Network: http://192.168.3.78:8000
```

é¡¹ç›®å·²ç»æˆåŠŸå¯åŠ¨ï¼Œå¯ä»¥é€šè¿‡http://localhost:8000å»è®¿é—®çœ‹æ•ˆæœï¼š

![umié¡¹ç›®å·²ç»æˆåŠŸå¯åŠ¨](./images/i2.png)

### 3. umiåŸºç¡€

#### 3.1 é…ç½®

umiï¼Œåœ¨.umirc.tsæˆ–è€…config/config.tsä¸­è¿›è¡Œé…ç½®ï¼Œç®€å•çš„é…ç½®ï¼Œå¯ä»¥ç›´æ¥åœ¨.umirc.tsä¸­è¿›è¡Œé…ç½®ï¼Œå¦‚æœå¤æ‚çš„é…ç½®ï¼Œå¯ä»¥åœ¨config/config.tsä¸­è¿›è¡Œé…ç½®ï¼Œæ”¯æŒES6.

å¸¸è§çš„é…ç½®:

```ts
import { defineConfig } from 'umi';

// è·¯ç”±ç»„ä»¶
const Index = '@/pages/index';
const List = '@/pages/list/index';

export default defineConfig({
  nodeModulesTransform: {
    type: 'none',
  },
  layout: {},
  routes: [
    { path: '/', component: Index },
    {path: '/list', component: List}
  ],
  fastRefresh: {},
  history:{
    type: 'hash'
  },
  mfsu: {} // å¯ç”¨mfsu
});
```

##### 3.1.1 è·¯ç”±é…ç½®

1. å·¥ç¨‹åŒ–é…ç½®

å·¥ç¨‹åŒ–é…ç½®ï¼Œå°±æ˜¯æŠŠè·¯ç”±ä¿¡æ¯å•ç‹¬é…ç½®æˆä¸€ä¸ªè·¯ç”±æ–‡ä»¶ã€‚é»˜è®¤çš„é…ç½®ä¸­ï¼Œrouteæ˜¯é…ç½®åˆ°äº†.umirc.tsä¸­çš„ï¼Œåœ¨é¡¹ç›®ä¸­ï¼Œå»ºè®®æŠŠrouteréƒ¨åˆ†æŠ½ç¦»å‡ºå»

```ts
// src/roiter/router.ts
const router: any = [
    {
        path: "/",
        component: "@/pages/index"
    },
    {
        path: "/list/",
        component: "@/pages/list/index"
    }
  ]
  
export default router;
```

åœ¨.umirc.tsä¸­å¯¼å…¥è·¯ç”±ä¿¡æ¯

```ts
import { defineConfig } from 'umi';
// è·¯ç”±
import router from './src/router/router';

export default defineConfig({
  nodeModulesTransform: {
    type: 'none',
  },
  routes: router
});
```

2. çº¦å®šå¼è·¯ç”±

çº¦å®šå¼è·¯ç”±ï¼Œå°±æ˜¯æ–‡ä»¶è·¯å¾„å°±æ˜¯è·¯ç”±ï¼Œä¸éœ€è¦æ‰‹å†™é…ç½®ï¼Œé€šè¿‡ç›®å½•å’Œæ–‡ä»¶æå…¶å‘½ååˆ†æè·¯ç”±é…ç½®

```markdown
./src/pages
â”œâ”€â”€ detail
â”‚Â Â  â””â”€â”€ index.tsx
â”œâ”€â”€ index.less
â”œâ”€â”€ index.tsx
â””â”€â”€ list
    â””â”€â”€ index.tsx
```

å¦‚è¿™æ ·çš„æ–‡ä»¶ç›®å½•ï¼Œä¼šå¾—åˆ°å¦‚ä¸‹çš„è·¯ç”±ï¼š

```ts
const router: any = [
    {
        path: "/",
        component: "@/pages/index"
    },
    {
        path: "/list/",
        component: "@/pages/list/index"
    },
    {
        path: "/detail",
        component: "@/pages/detail/index"
    }
  ]
  
export default router;
```

>  çº¦å®šå¼è·¯ç”±ï¼Œè¦å…ˆæ³¨é‡Šæ‰.umirc.tsæ–‡ä»¶ä¸­çš„routesé…ç½®

```ts
import { defineConfig } from 'umi';
export default defineConfig({
  nodeModulesTransform: {
    type: 'none',
  },
  // routes: router, // çº¦å®šè°è·¯ç”±ï¼Œè¦æ³¨é‡Šæ‰routesé…ç½®é¡¹
});
```

**ä»¥ä¸‹æ¡ä»¶ã€è§„åˆ™çš„æ–‡ä»¶ä¸ä¼šè¢«æ³¨å†Œä¸ºè·¯ç”±**

- ä»¥.æˆ–è€…_å¼€å¤´çš„æ–‡ä»¶æˆ–ç›®å½•

- ä»¥d.tsç»“å°¾çš„ç±»å‹æ–‡ä»¶

- ä»¥test.tsã€spec.tsã€e2e.tsç»“å°¾çš„æµ‹è¯•æ–‡ä»¶ï¼ŒåŒæ ·é€‚ç”¨äºjsã€jsxå’Œtsxæ–‡ä»¶

- componentså’Œcomponentç›®å½•

- utilså’Œutilç›®å½•

- ä¸æ˜¯.jsã€.jsxã€.tså’Œ.tsxæ–‡ä»¶

- æ–‡ä»¶å†…å®¹ä¸åŒ…å«jsxæˆ–tsxå…ƒç´ 

3. é…ç½®å­è·¯ç”±

é…ç½®å­è·¯ç”±ï¼Œéœ€è¦æœ‰ä¸€ä¸ªè¿™äº›å­è·¯ç”±ç»„ä»¶çš„å…¬å…±é€šç”¨ç»„ä»¶,å¦‚

```markdown
./user
â”œâ”€â”€ account
â”‚Â Â  â””â”€â”€ index.tsx
â”œâ”€â”€ index.tsx
â”œâ”€â”€ profile
â”‚Â Â  â””â”€â”€ index.tsx
â””â”€â”€ ucenter
    â””â”€â”€ index.tsx
```

æ¡ˆä¾‹ä¸­ï¼Œuseræ¨¡å—æœ‰å‡ ä¸ªå­æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„è·¯ç”±ï¼Œå³éƒ½æ˜¯useræ¨¡å—çš„å­è·¯ç”±ï¼Œé‚£ä¹ˆ./user/index.tsxå°±æ˜¯è¿™äº›å­è·¯ç”±çš„å…¬å…±é€šç”¨ç»„ä»¶ã€‚åœ¨è¿™ä¸ªå…¬å…±é€šç”¨çš„ç»„ä»¶ä¸­ï¼Œé€šè¿‡props.childrenæ¥æ¸²æŸ“å­è·¯ç”±ã€‚

```tsx
export default (props:any) => {
    return <div style={{padding: '20px'}}>
        <h4>å¤§ä¸ªäººä¸­å¿ƒå°±æ˜¯å¤§</h4>
        {/* å…·æœ‰å­è·¯ç”±çš„å…¬å…±ç»„ä»¶ä¸­ï¼Œè·¯ç”±è·³è½¬æ—¶éœ€è¦ä½¿ç”¨å…¨è·¯å¾„ */}
        <a href="/user/profile">ä¸ªäººæ¡£æ¡ˆ</a>
        <br />
        <a href="/user/ucenter">å°çš„é‡Œé¢çš„ä¸ªäººä¸­å¿ƒ</a>
        <br />
        {/* é€šè¿‡props.childrenæ¥æ¸²æŸ“å­è·¯ç”± */}
        {props.children}
        </div>
}
```

å­è·¯ç”±ä¸­ï¼Œè·¯ç”±çš„è·³è½¬å¯ä»¥é€šè¿‡ç»å¯¹çš„è·¯ç”±ï¼Œå³å®Œå…¨çš„è·¯ç”±å¦‚/user/profileã€‚

> å„ä½çœ‹å®˜å…ˆä¸ç”¨çº ç»“æ¡ˆä¾‹ä¸­çš„aè·³è½¬çš„åˆç†æ€§ï¼Œæˆ‘è¿™é‡Œåªæ˜¯ä¸ºäº†å›¾çœäº‹ï¼Œå°±æ²¡æœ‰å†™è·¯ç”±è·³è½¬ï¼Œç”¨aæ¨¡æ‹Ÿäº†ä¸‹ï¼›æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä¸æ˜¯ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆªè·³è½¬ï¼Œä¼šä½¿ç”¨Linkç»„ä»¶å®ç°è·¯ç”±çš„è·³è½¬ã€‚

##### 3.1.2 è·¯ç”±è·³è½¬

1. å‘½ä»¤å¼è·¯ç”±è·³è½¬

é€šè¿‡umiå†…ç½®çš„historyæ’ä»¶å®ç°ç¼–ç¨‹å¼è·¯ç”±è·³è½¬

```tsx
import { history } from "umi";
export default (props:any) => {
    // ç¼–ç¨‹å¼è·¯ç”±è·³è½¬
    const changeProfile = () => {
        history.push("profile");
    }

    // ç¼–ç¨‹å¼è·¯ç”±è·³è½¬
    const improvePersonalData = () => {
        history.push("account");
    }
    return <div style={{padding: '20px'}}>
        <h4>å¤§ä¸ªäººä¸­å¿ƒå°±æ˜¯å¤§</h4>
        <button onClick={changeProfile}>å»ä¿®æ”¹ä¸ªäººæ¡£æ¡ˆ</button>
        <button onClick={improvePersonalData}>å®Œå–„ä¸ªäººèµ„æ–™</button>
        {/* é€šè¿‡props.childrenæ¥æ¸²æŸ“å­è·¯ç”± */}
        {props.children}
        </div>
}
```

**ç¼–ç¨‹å¼è·¯ç”±è·³è½¬æºå¸¦å‚æ•°**

éƒ½æ˜¯queryå‚æ•°ï¼Œä¼šæ˜¾ç¤ºåˆ°æµè§ˆå™¨åœ°å€æ 

```tsx
// è·³è½¬åˆ°æŒ‡å®šè·¯ç”±
history.push("profile");

// è·³è½¬åˆ°æŒ‡å®šè·¯ç”±å¹¶æºå¸¦URL(query)å‚æ•°,æµè§ˆå™¨åœ°å€æ ä¼šæ˜¾ç¤º
history.push("profile?key=sun");

// é€šè¿‡å¯¹è±¡æ–¹å¼ä¼ é€’å‚æ•°ï¼Œæ˜¾ç¤ºåˆ°æµè§ˆå™¨åœ°å€æ 
history.push({
    pathname: "account",
    query: {
        from: "moon"
    }
});
```
2. é…ç½®å¼è·¯ç”±è·³è½¬ï¼šé€šè¿‡Linkç»„ä»¶

Linkç»„ä»¶åªé€‚ç”¨å•é¡µåº”ç”¨å†…éƒ¨çš„è·³è½¬ï¼Œå¦‚æœæ˜¯å¤–éƒ¨çš„åœ°å€è·³è½¬ï¼Œéœ€è¦ä½¿ç”¨aæ ‡ç­¾

Linkç»„ä»¶æ˜¯umiå†…ç½®ç»„ä»¶ï¼Œç›´æ¥å¯¼å…¥ä½¿ç”¨å³å¯ã€‚

Linkç»„ä»¶ï¼Œä¹Ÿå¯ä»¥æºå¸¦å‚æ•°ï¼Œç›´æ¥åœ¨pathåæ‹¼æ¥å³å¯

```tsx
import { Link } from "umi"; // å¯¼å…¥Linkç»„ä»¶
export default function DetailPage(){
    return <div className="detail">
        <h4>è¯¦æƒ…é¡µ</h4>
        <ul>
            <li>
                <Link to="/">é¦–é¡µ</Link>
            </li>
            <li>
                {/* Linkç»„ä»¶é¡µå¯ä»¥æºå¸¦å‚æ•°ï¼Œç›´æ¥æ‹¼æ¥å³å¯ï¼Œä¼šåœ¨æµè§ˆå™¨åœ°å€æ æ˜¾ç¤º */}
                <Link to="/list?from=detail">åˆ—è¡¨é¡µ</Link>
            </li>
        </ul>
    </div>
}
```

##### 3.1.3 ç¯å¢ƒå˜é‡

1. è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œæ‰§è¡Œå‘½ä»¤æ—¶æ·»åŠ 

```bash
# mac
PORT=9000 yarn start # è®¾ç½®åœ¨9000ç«¯å£ä¸Šå¯åŠ¨æœåŠ¡

# windows
set PORT=9000 yarn start # è®¾ç½®åœ¨9000ç«¯å£ä¸Šå¯åŠ¨æœåŠ¡
```

ä¸Šé¢çš„æ–¹å¼ï¼ŒåŒºåˆ†äº†macå’Œwindowsç¯å¢ƒï¼Œå¯ä»¥é€šè¿‡cross-envæ¥æŠ¹å¹³è¿™ä¸ªå·®å¼‚

```bash
yarn add cross-env --dev
cross-env PORT=9000 yarn start # åœ¨windowsä¸Šå’Œmacä¸Šéƒ½ç”Ÿæ•ˆï¼Œè®¾ç½®åœ¨9000ç«¯å£ä¸Šå¯åŠ¨æœåŠ¡
```

2. ç”Ÿæˆå™¨å·¥å…·  generate

umi generate <type> <name> [options]

umi generate page pagename é»˜è®¤ç”Ÿæˆä¸€ç»„åç§°ä¸ºpagename.jsçš„reactæ–‡ä»¶å’Œpagename.cssçš„æ ·å¼æ–‡ä»¶ï¼Œä¸”jsæ–‡ä»¶ä¸­ä¼šç›´æ¥å¼•å…¥cssæ–‡ä»¶ã€‚å¦‚pagename.jsæ–‡ä»¶ï¼š

```bash
xx@xxxxx umi1 % umi generate page t1
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating
Write: src/pages/t1.js
Write: src/pages/t1.css
```

ä¸‹é¢æ¥çœ‹æ¨¡æ¿æ–‡ä»¶t1.jsä»£ç ï¼š

```js
import React from 'react';
import styles from './t1.css';

export default function Page() {
  return (
    <div>
      <h1 className={styles.title}>Page t1</h1>
    </div>
  );
}
```

```bash
umi generate page pagename --typescript  # ç”Ÿæˆä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ä¸ºtsä¸ºæ‰©å±•åå’Œä¸€ä¸ªæ ·å¼æ–‡ä»¶ä»¥.cssä¸ºæ‰©å±•åçš„æ–‡ä»¶
umi generate page pagename --less # ç”Ÿæˆä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ä»¥.jsä¸ºæ‰©å±•åå’Œä¸€ä¸ªä»¥.lessä¸ºæ‰©å±•åçš„æ ·å¼æ–‡ä»¶
umi generate page pagename --typescript --less # ç”Ÿæˆä¸€ä¸ªä»¥.tsä¸ºæ‰©å±•åçš„æ¨¡æ¿æ–‡ä»¶å’Œä¸€ä¸ªä»¥.lessä¸ºæ‰©å±•åçš„æ ·å¼æ–‡ä»¶
```

3. umi plugin  æŸ¥çœ‹å½“å‰é¡¹ç›®ä½¿ç”¨åˆ°çš„æ‰€æœ‰umiæ’ä»¶

è¯­æ³•  umi plugin <type> [opitons]

å½“å‰typeå°±æ”¯æŒä¸€ä¸ªlist,optionså¯é€‰key

```bash
xx@xxxxx umi1 % umi plugin list --key
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating

  Plugins:

    - @umijs/preset-built-in [key: builtIn] (preset)
    - @umijs/preset-react [key: react] (preset)
    - ./node_modules/umi/node_modules/@@/registerMethods [key: registerMethods]
    - ./node_modules/umi/node_modules/@@/routes [key: routes]
    - ./node_modules/umi/node_modules/@@/generateFiles/core/history [key: history]
    - ./node_modules/umi/node_modules/@@/generateFiles/core/plugin [key: plugin]
    - ./node_modules/umi/node_modules/@@/generateFiles/core/polyfill [key: polyfill]
    - ./node_modules/umi/node_modules/@@/generateFiles/core/routes [key: routes]
    - ./node_modules/umi/node_modules/@@/generateFiles/core/umiExports [key: umiExports]
    - ./node_modules/umi/node_modules/@@/generateFiles/core/configTypes [key: configTypes]
    - ./node_modules/umi/node_modules/@@/generateFiles/umi [key: umi]
    - ./node_modules/umi/node_modules/@@/features/404 [key: 404]
    - ./node_modules/umi/node_modules/@@/features/alias [key: alias]
    - ./node_modules/umi/node_modules/@@/features/analyze [key: analyze]
    â€¦â€¦
```

ä¸ä½¿ç”¨å¯é€‰çš„å‚æ•°keyï¼Œå°±æ²¡æœ‰äº†åé¢çš„æ˜¾ç¤ºkeyäº†

```bash
xx@xxxx umi1 % umi plugin list
Browserslist: caniuse-lite is outdated. Please run:
npx browserslist@latest --update-db

Why you should do it regularly:
https://github.com/browserslist/browserslist#browsers-data-updating

  Plugins:

    - @umijs/preset-built-in (preset)
    - @umijs/preset-react (preset)
    - ./node_modules/umi/node_modules/@@/registerMethods
    - ./node_modules/umi/node_modules/@@/routes
    - ./node_modules/umi/node_modules/@@/generateFiles/core/history
    - ./node_modules/umi/node_modules/@@/generateFiles/core/plugin
    - ./node_modules/umi/node_modules/@@/generateFiles/core/polyfill
    - ./node_modules/umi/node_modules/@@/generateFiles/core/routes
    - ./node_modules/umi/node_modules/@@/generateFiles/core/umiExports
    - ./node_modules/umi/node_modules/@@/generateFiles/core/configTypes
    - ./node_modules/umi/node_modules/@@/generateFiles/umi
    - ./node_modules/umi/node_modules/@@/features/404
    - ./node_modules/umi/node_modules/@@/features/alias
    â€¦â€¦
```

##### 3.1.4 æ ·å¼å’Œå›¾ç‰‡æ–‡ä»¶

umié»˜è®¤æ”¯æŒäº†lessé¢„å¤„ç†å™¨ï¼Œå¦‚æœæƒ³ä½¿ç”¨cssï¼Œåˆ™ç›´æ¥å°†.lessä¿®æ”¹ä¸ºcsså³å¯ï¼ŒåŒæ ·é€‚ç”¨ã€‚

1. global.less  å…¨å±€æ ·å¼

