### 快速删除node_modules

有的时候发现自己想删除node_modules目录，方式是通过UI工具的方式删除，但是偶尔删除很慢。那么具体的原因是什么呢？

1. 文件数量大，node_modules目录可能会有上万个的文件和目录，那么删除操作就需要操作系统耗费一定的时间来处理每个文件和目录；

2. 文件系统缓存：操作系统需要时间去刷新文件系统的缓存，特别是对于那些频繁访问的目录和文件；

3. 文件进程被占用：如果某些进程在占用node_modules中的文件，也就是被正在引用，正在被引用中的文件是无法被删除的，系统会给出相应的提示直到相关的进程释放


4. 磁盘IO限制：硬盘与SSD的读写速度也会限制删除文件的速度，尤其是在一些老旧的机械硬盘中。

5. 图形界面限制：图形界面工具在处理大量文件时，可能会因为UI的更细和绘制而变慢

### rimraf，一款基于node和命令行的删除工具

1. 安装

```bash
npm install rimraf -g
```

2. 使用方法

全局安装了以后，就可以直接在命令行使用了

```bash
rimraf test # 删除目录
rimraf test.bak # 删除单个文件
```

rimraf既可以直接删除文件，也可以直接删除文件夹

### rimraf为什么可以快速删除node_modules等大文件目录？

rimraf是一个node.js模块，它能提供一个跨平台的方式来删除文件和目录，它的删除速度快的主要原因有以下几个：

1. 异步操作：rimraf使用异步IO操作，那么它就不会阻塞事件循环，能够更加高效的处理大量文件的目录和删除指令

2. 递归删除：rimraf会递归的删除目录及其所有子目录和文件，这比手动或使用某些其他的系统指令有更高的效率，因为其他的一些系统指令可能需要多次调用才能完成一个目录的清空操作

3. 错误处理：rimraf能够更好的处理删除过程中出现的异常问题，比如权限、正在被使用的情况，它会跳出这些异常文件，而不是直接跳出整个删除过程

4. 跨平台的兼容性：rimraf在不同的平台上的表现是一致的

说了这么多rimraf，但是仔细分析，好像都和能够快速删除没有什么关系。

### rimraf和其他的删除方式rm -rf的区别

1. 环境

- rm -rf：命令行工具，常在linux、unix系统中使用

- rimraf：是一个node.js的模块，可以在任何系统中使用，且在不同的平台上表现是一致的

2. 使用方式

- rm -rf：这是一个指令，可以直接在终端使用，也可以通过脚本文件的方式去执行

- rimraf：是一个node.js的模块，既可以在终端命令行中直接使用，也可以在node.js、js项目中使用

3. 安全性

- rm -rf:直接删除系统中的目录和文件，使用时需要慎重

- rimraf：本身为一个node.js模块，提供了回调函数的能力，可以在进行删除的操作中进行一些操作，相对来说安全性比rm -rf上好一点，但是程度上也有限

