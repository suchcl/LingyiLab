### react中慎用ref和effect

为什么这么说呢？因为ref和effect操作的都是脱离react控制的因素。

effect中处理的是副作用，比如在effect中发起了一个异步的ajax请求。一般情况下，一个页面中的列表数据都会放到一个effect中去异步的请求数据，还可以设置一些依赖，依赖变化后重新请求数据。

为什么说effect中的异步请求是副作用呢，因为异步请求的数据不是react能够控制的状态，返回的数据react没有办法去控制，也没有办法提前感知，只能异步的请求返回了数据了，才能知道异步请求的数据是什么。

还有一个典型的案例，就是输入框获取焦点的操作。DOM操作，可能直接使用element.focus()方法就可以了，但是这种DOM操作、直接执行DOM API的方式也是不受react控制的。

很多脱离React控制的操作，react的新的文档上，被称作ESCAPE HATCHES(逃生舱)。虽然有些操作会脱离React对其状态的控制，但是react还是要尽可能的防止一些操作失控。