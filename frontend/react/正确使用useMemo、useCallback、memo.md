useMemo和useCallback，在很多场景下，其实不建议使用，因为使用了这2个hooks后，在页面首次render的时候需要额外做一些工作来提供缓存，不利于页面的首次加载。

正是这个原因，也有一些观点，就是说不要在刚开始写代码的时候，就想着怎么去做优化，而是等到发现问题了、或者已经发现了有问题出现的端倪了，再去优化。这个时候也不迟。

我们先不管观点的正确与否、科学与否，我们应该关注的是究竟什么场景下应该使用useMemo、useCallback这2个缓存的hooks。

### 1. 那么什么时候应该使用缓存呢？

1. 缓存useEffect的引用类型依赖；

2. 缓存子组件props中的引用类型；

#### 1.1 缓存useEffect的引用类型依赖



#### 1.2 缓存子组件props中的引用类型

缓存子组件props中的引用类型，主要是为了防止组件非必要的重新渲染导致的性能消耗，在缓存子组件props中的引用类型之前，首先需要明确组件在什么情况下需要重新渲染。

1. 组件的props或者state变化导致组件的重新渲染；

2. 父组件的重新渲染会导致其子组件的重新渲染；

明确了这2个场景之后，那么我们首先可以明确的是，在父组件中和子组件没有关系的状态变更可以不重新渲染子组件，以减少不必要的性能、资源的浪费。

一般情况下呢，我们也知道这个道理，但是就是在实现的时候，存在一些问题。