### 1. Javascript基础

今天看到了几个问题，觉着问的很有意思：

1. 为什么有的编程规范要求用void(0)来代替undefined？

2. 字符串有最大长度吗？

3. 0.1 + 0.2不是等于0.3吗？为什么javascript里面不是这样子的？

4. ES6中新加入的Symbol是个什么东西？

5. 为什么给对象添加的方法能够用在基本类型上？

学习一门编程语言，应该从学别人的技术点、知识点，整理、梳理成自己的技术知识体系，那么javascript应该怎么学习呢，它的技术知识体系是什么样子的呢？

我认为，可以从运行时、语法和执行过程三个维度去分析、学习。

#### 1.1 类型

Javascript是一门动态类型的编程语言，即变量在声明的时候可以不指定变量类型，而在使用的时候才会确定具体的变量类型，且类型可变。

Javascript的每一个变量都属于某个类型，Js语言规定了7种类型：

- Undefined

- Null

- Boolean

- String

- Number

- Symbol

- Object

语言类型广泛的使用在变量、函数参数、表达式、函数返回值等场合，各种类型可以之间可以相互、自动的相互转换。

**Undefined、null**：为什么一些编程规范中要求用void(0)代替undefined？

Undefined类型表示未定义，它的类型只有一个值，就是undefined。任何变量在赋值前都是Undefined类型，值为undefined，一般我们可以使用undefined这个全局变量来表示这个值,或者使用void运算来把人意一个表达式变成undefined值。

> void运算符，对给定的表达式进行求值，然后返回undefined。 [void运算符](./void运算符.md)

null类型只有一个值：null，它的语义是表示空值。但是它与undefined不同，null是javascript的关键字，在js中的任何代码部分，都是可以使用null来获取null值。但是undefined不是js的保留字或者关键字，只是一个全局变量，我们也可以自定义undefined来覆盖这个全局变量。

#### 1.2 javascript是面向对象还是基于对象？

以前经常听说这么一句话，尤其是刚入门前端或者其他语言的开发者，都发出了同样的声音，说javascript是一门基于对象的语言，而不是面向对象的语言。

我自己也经常有这样的一些疑问：

1. 为什么js中可以随意的给对象添加属性，但是其他语言不行；

2. 为什么js中一直都有对象的概念，但是并没有像其他买面向对象语言那样有类的概念；

### 2. 面向对象的实现

学习其他编程语言的人，比如java、C++，他们说起面向对象，肯定就会说java和c++是一门面向对象的语言，我自己也没有过怀疑。因为从一开始学习软件工程开始，学面相对象编程，就是从java开始的，还学习了面相对象的几个特征，如继承、封装和多态，但是后来接触到了前端，需要和js打交道，于是听到了不同的声音。

有人说js是面向对象的语言，有人说js是基于对象的语言。说js是面向对象的语言，是因为js也可以声明模拟类，虽然在直到ES2015(ES6)标准才有了class的概念，但是之前的ES版本中，可以通过function来创建对象的，也可以通过Object关键字来创建对象，或者简单点，就是直接声明一个对象字面量，然后js也有一些内置的对象，让我们可以通过new关键字来声明实例对象，如Date、String、Object等等，太多了。所以一大部分人支持js是面向对象的语言。

同时又因为正是因为js提供了如Object、Date等内置对象，开发者可以直接使用这些对象，所以又称js为基于对象的语言，就是指js基于这些已有的对象。

#### 2.1 什么是对象

《面向对象分析与设计》作者的简单总结，他认为对象应该是具备下面的一些特征的：

1. 可以触摸或者看见的东西；

2. 人的智力可以理解的东西；

3. 可以指导思考或行动的东西；

在不同的编程语言中，作者们利用各种语言的不同特点，使用了不同的方式来描述或者抽象对象，现在来看，最成功的一派是以类的的方式来描述对象，如java、c++；也有其他的一些描述对象的方式，比如原型，js就是使用原型来描述对象的。

> javascript由于早期发展的一些原因，最初的javascript是在模仿java，导致了js中有很多java的特性，如new操作符、this等，甚至名字中都有了java的字眼。

#### 2.2 模拟类

我们通过js的学习，了解了js或者就js是面向对象的语言，只是js对于面向对象的实现和其他的基于类的面向对象的实现方式不同，如java、C++是基于类实现的面向对象，js是基于原型的面向对象。

虽然我们有了上面的共识，但是也还有一些人没有达成上面的共识，或者对这个共识的认知还不够强烈，到了实际编码的时候，或者做一些技术交流的时候，总是会谈起要用模拟对象的方式去实现一些功能。那么在js中，真的需要去模拟对象吗？

如果我们达成了前面提到的共识，其实就不难回答这个问题了，因为js本身就是一门面向对象的语言，所以也就不存在需要去模拟对象了。那么我们就可以很容易的梳理出来，其实出现频率很高的，说要模拟对象，其实是想表达的是要模拟基于类的方式去描述对象。这才是底层的要表达的意思。

在js的最早期的版本，其实就已经支持了类的概念，只不过是ES6标准(ECMA2015)才提供了class关键字来定义类.

```js
// 一个简单的js类  通过工厂函数创建类
function Range(from, to) {
    let obj = Object.create(range.utils);
    obj.from = from;
    obj.to = to;
    return obj;
}

range.utils = {
    includes(x) {
        return this.from <= x && x <= this.to;
    }
};
```

这是最早的在js中定义类的方式，定义一个简单的Ragne类(我们暂不考虑这个类的代码的合理性)，且这个类的对象从range.utils这个原型继承属性或方法,定义了一个类，那么怎么去使用这么一个类去实例化对象呢？

```js
let r1 = Range(3, 5);
console.log(r1); // { from: 3, to: 5 }
```

虽然到了ES6标准，新增了class关键字，但是并没有改变js的类是基于原型的本质，新增的class关键字语法明确，让我们对语言的理解更加容易，但是最好还是从语言的本质上去理解它，因为这个class关键字，仅仅是js中类基于原型的实现的一个语法糖。

下面简单看下上面的代码使用class关键字的实现：

```js
class Range {
    constructor(from, to) {
        this.from = from;
        this.to = to;
    }

    includes(x) {
        return this.from <= x && x <= this.to;
    }
}

let r2 = new Range(4, 6);
console.log(r2);
```

使用class重构后的实现，理解起来确实简单了很多。