<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

- [1.AB实验](#1ab%E5%AE%9E%E9%AA%8C)
- [2. 常见的分流方式](#2-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%88%86%E6%B5%81%E6%96%B9%E5%BC%8F)
  - [2.1 接口分流](#21-%E6%8E%A5%E5%8F%A3%E5%88%86%E6%B5%81)
  - [2.2 投放侧分流](#22-%E6%8A%95%E6%94%BE%E4%BE%A7%E5%88%86%E6%B5%81)
  - [2.3 web服务器侧分流](#23-web%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BE%A7%E5%88%86%E6%B5%81)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

### 1.AB实验

在做商业产品的时候，经常会需要测验一些运营策略的价值，以此为依据对后续运营动作做决策，检测不同运营策略效果的时候，经常使用的方式就是AB实验。

**什么是AB实验呢？**

AB实验，简单来说，就是两面性的一个测试，其实现方式是分流，对流量的流向进行控制，从而达到AB实验的目标。

**那么什么又是分流呢？**

分流，就是将流量分向不同的方向。比如某个站点进来了1000个流量，通过一些技术手段，使这1000个流量中国的500个流量流向路径A，另外500个流量流向路径B。这就是分流。当然了，也可以控制流向更多的分支，只是实际使用的相对较少。

分流，不一定是绝对的流向不同的路径，也有可能是将用户导向不同的组件，让用户最终享受、使用到不同的服务。

让用户使用、享受不同的服务，常用的就是将用户导向不同的路径和不同的UI视觉组件，通过收集、分析不同用户在不同的服务体验下的数据，来判断不同运营策略的效果。

### 2. 常见的分流方式

1. 接口分流

2. 投放侧分流

3. web服务器层分流(web服务器，好像nginx使用的多一些，但不一定就是nginx)

#### 2.1 接口分流

客户端在展示内容之前，先获取服务端的接口，根据接口的相应结果确定渲染某组件或者导向某个路由。

接口分流的优势是可以实现功能的配置化，产品的运营人员可以在后台进行流量配置，不需要开发人员的支持就可以快速实现分流目的，灵活、方便。

**不适用场景**

使用接口分流，需要注意在进行一些功能迭代的时候是否需要重新部署代码，如果需要重新部署代码，可能会对AB实验造成一些伤害性的修改。这种场景可能不太适合接口分流，如果还是希望有接口分流的这种灵活性，那么就需要在更高的层次去抽象分流的功能。

**不足**

使用接口的方式分流，有一些缺陷：就是无论是CSR项目还是SSR项目，都需要调用短提前调用http接口去获取响应，然后根据响应做分流动作，都会造成一些资源上的浪费；

#### 2.2 投放侧分流

投放侧分流，只是需要我们在做项目的时候，把需要实验的服务做成2个URL，然后我们把2个URL都提供给投放侧，让投放侧做流量的分流。这种做法其实和技术已经没有什么关系了，因为分流的动作已经分了出去，给了投放服务商了。


这种通过投放侧分流的方式，可以规避接口分流带来的性能消耗，但是可能会存在实验结果的真实性；

投放服务上，可能会为了让客户使用自己的服务，从而在投放服务的时候做一些技术上的处理，给你临时提供一些优质数据，让你误以为他们有更好的服务，从而给你造成误判。

#### 2.3 web服务器侧分流

以nginx为例吧。

这方面的技术实现，可以由运维同学帮忙。其主要的技术点，就是在流量流向最终的站点之前，会经过nginx这么个中转站，然后这个中转站就可以控制流量的最终流向，这种实现方式，和普通的开发人员关系不是很大，主要是做好沟通就可以了。