### 开始一个项目

学习一门语言、一个框架，最有效、最快的办法就是快速搭建一个项目，边代码实践边看文档学习。

### 环境支持

1. 操作系统：Mac、Linux、Windows
2. 运行环境：Nodejs 8.x以上的稳定版本

### 项目初始化

框架给我们做好了项目初始化工具，只需要两行简单的npm指令就可以了。

```bash
mkdir eggProject && cd eggProject 创建一个egg项目的目录并进入该目录
npm init egg --type=simple  快速初始化一个简单模板的egg项目
npm install/npm i  安装项目依赖
```

到此为止，一个egg项目就创建好了，且已经安装好了依赖，接下来启动运行命令就可以运行了。

### 启动项目

```bash
npm run dev  启动项目
```

项目启动后，默认占用端口7001，启动状态可参考下图：
![项目启动后状态信息提示](../../public/images/egg.png "项目启动后状态信息提示")

### Demo

先不用理会demo的合理性，也先不理会controller、router个service什么概念，具体是怎么样的调用方法，先根据工具给我们生成好的项目目录结构以及文档写些示例代码，迅速让demo运行起来。

1. 编写controller

```javascript
// /app/controller/home.js

'use strict';

const Controller = require('egg').Controller;

class HomeController extends Controller {
  async index() {
    const { ctx } = this;
    ctx.body = 'hi, egg';
  }

  async home(){
    const {ctx} = this;
    ctx.body = "新的";
  }

  async userList() {
    const {ctx} = this;
    ctx.body = "用户列表";
  }
}

module.exports = HomeController;
```

2. 配置路由

```javascript
//  /app/router.js
'use strict';

/**
 * @param {Egg.Application} app - egg application
 */
module.exports = app => {
  const { router, controller } = app;
  router.get('/', controller.home.index);
  router.get("/home",controller.home.home);
  router.get("/getUserList",controller.home.userList);
};
```

demo中给出了3个示例，有3个路由，我们访问路由，controller给我们返回一些响应数据。我们请求不同的路由，得到了预期的返回的数据，效果如下：

访问项目默认的demo

![访问项目默认的demo](../../public/images/i1.png "默认首页")

访问自定义的router为/home的页面

![访问自定义的router为/home的页面](../../public/images/i2.png "访问自定义的router为/home的页面")

访问自定义router为/getUserList的页面

![访问自定义router为/getUserList的页面](../../public/images/i3.png "访问自定义router为/getUserList的页面")

### 静态资源

Egg内置了static插件，但是线上环境的静态资源建议部署到CDN，一般情况下，用不到该插件。

还有一种情况，就是我们大多数情况是希望egg给我们提供基础的数据接口服务，通过node的能力做数据处理，页面展示的部分一般会单独起Vue或者React项目，静态资源就跟着到了Vue或者React项目中了。

我一般不会在egg中通过一些模板引擎做数据的展示，如果在有必要的情况下，可以使用模板引擎，常用的模板引擎有ejs、pug、Nunjucks等，对应的静态资源static插件默认映射到/app/public/目录下面。

### 模板渲染

这部分，简单了解下知道有这么个模板引擎可以用就可以了，一般用不到，因为做数据渲染的时候，我们有Vue和React。

这里以nunjucks模板引擎为例，作为一个demo。

1. 安装模板引擎nunjuncks

```bash
npm install egg-view-numjucks --save
```

2. 配置插件

```javascript
// config/plugin.js
// 可以这样配置
module.exports = {
  nunjucks: {
    enable: true,
    package: "egg-view-nunjucks"
  }
};

// 也可以这样配置
const nunjucks = {
  enable: true,
  package: 'egg-view-nunjucks'
};
module.exports = { nunjucks };
```

上面两种配置方法都可以，技术实现上都没有问题，只是node中两种模块的导出方式，node模块系统知识可参考: [node中modules模块系统](../../node/module.md)

然后配置模板引擎

```javascript

```