### vue中为什么不要使用index作为key?

主要是性能问题，有一篇文章分析的很好，就不再敲字了：https://github.com/sl1673495/blogs/issues/39

### 那么可以使用一个随机数来作为key吗？

前面我们已经了解到不要使用index作为key，性能不好，优秀的实践是服务端给下发一个标识唯一值的字段，用这个字段来作为key。

那是不是只要这个值唯一就可以了呢？我不使用index作为key，那么我使用一个随机数，每次的值也都是不同的，那应该也是可以的吧。

使用随机数虽然保证了同一个列表中的key都不同了，但是我们在进行新旧节点变更的时候，新老数据节点也是完全不同的，那么按照vue的机制，就会把旧的节点全部干掉，再重新创建新节点，然后再进行渲染。性能比使用index还要差。

### 结论

1. 在需要key的地方，就使用组件的唯一标识作为key，让服务端返回

   当然了，有人可能会讲，说这个标识数据唯一性的数据在页面上没有展示，服务端不给返回，这是一个团队内部规范、协作的问题，在你说服不了的情况下，就向你的上级反馈吧，并将这定义成开发规范，不要每次开发的时候都去撕你要给我返回ID，而是说你必须还要返回这个ID

2. 如果服务端在没有给返回唯一标识的情况下也不要使用index

   因为index起不到任何的正面作用，还会误导后面的人，误以为index作为key也是可取的。如果接口没有下发组件的唯一性标识，那就空着也不要写

3. 禁止使用随机数作为key。

   

