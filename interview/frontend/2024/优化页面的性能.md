### 怎么去优化页面的性能

优化页面的性能，是一个长期、持续的工作，不是一蹴而就的，也不会或者说是不可能是一步到位的。

那么就长期、持续性来说，怎么优化页面的性能呢？

1. 开发框架的升级

开发框架升级，伴随着一些性能的提升。

2. 代码优化

比如在vue中进行条件渲染的时候，能使用v-if就不要使用v-show，因为使用v-if在条件为false的时候，DOM结构不会被渲染，页面的体积可以被减小；还有在Taro中进行平台判断的时候，可以在Taro的配置文件中进行平台判断，然后在页面中需要平台判断的时候，直接使用常量。其作用和v-if和v-show相同，条件为假的时候，可以少渲染一些DOM元素，从而减小代码的体积。

3. 性能监控和分析，然后做有针对性的优化

收集自己项目、竞品的、其他项目同类型的性能参数，做对比，找出自己项目中性能薄弱的部分，做针对性的优化。

我们自己曾经收集过自己小程序、竞品小程序的性能数据，通过对比，发现自己比竞品小程序性能参数差的项目，集中精力优化，过了大概半年的时间，大部分的性能参数基本上都超过了竞品。这是非常有参考价值的。

4. 代码层面优化

    - 尽量避免使用内联函数或者匿名函数，因为内联函数或者匿名函数，每次组件渲染的时候都会重新创建一个函数实例，有的时候可能会导致子组件的重新渲染.所以应该尽量避免这两种写法

    ```tsx
    // 错误示例
    <button onClick={() => changeUser}>提交</button>
    ```

    ```tsx
    // 正确示例
    <button onClick={changeUser}>
        提交
    </button>
    ```

    - 使用key优化列表渲染

    react渲染列表的时候，使用key属性来标识每个元素。正确使用key可以减少DOM操作，提升渲染效率。

    ```tsx
    <ul>
        {
            list.map(item => {
                return <li key={item.id}>{item.name}</li>
            })
        }
    </ul>
    ```

5. 使用ESM的标准去组织项目代码。

    现代前端构建工具如webpack、vite等具备tree shaking能力，只要我们的项目代码使用ESM的标准去构建模块化的代码，这些构建工具的tree shaking能力就会自动打开。

6. 